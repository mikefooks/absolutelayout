define("plot",[],function(){var e=function(e,t){var n=t.cellDimensions(e.row,e.column);this.location=e,this.cssProps={position:"absolute",left:n.width,top:n.height},this.occupied=!1};return e}),define("cell",["jquery"],function(e){var t=function(e,t,n,r,i,s){this.top=e,this.left=t,this.height=n,this.width=r,this.idName=i,this.classNames=s},n=function(){this.positionPlot={},this.occupiedPlots=[],this.cellInfo={},this.layout={},this.cssProps={},this.container={},this.$obj={}};return n.prototype={initConfig:function(t,n){var r=n.Plots[t.top+"-"+t.left],i=n.cellDimensions(t.height,t.width),s={top:r.cssProps.top,left:r.cssProps.left};this.positionPlot=r,this.cellInfo=t,this.layout=n,this.cssProps=e.extend({},i,s),this.container=n.config.container,this.$obj=e("<div></div>").attr("id",this.cellInfo.idName).addClass(this.cellInfo.classNames).css(this.cssProps).html("<p>"+this.cellInfo.idName+"</p>")},render:function(){this.occupiedPlots=this.layout.getPlots(this.cellInfo.top,this.cellInfo.left,this.cellInfo.height,this.cellInfo.width),this.container.append(this.$obj)},reposition:function(e,t){var n=this,r=this.layout.getPlots(e,t,this.cellInfo.height,this.cellInfo.width),i;i=r.filter(function(e,t){if(n.occupiedPlots.indexOf(e)===-1)return e}),this.layout.checkPosition(i)?(this.cellInfo.top=e,this.cellInfo.left=t,this.positionPlot=this.layout.Plots[e+"-"+t],this.modify(r)):console.log("renderFlag returned false. something is in the way")},resize:function(e,t){var n=this,r=this.layout.getPlots(this.cellInfo.top,this.cellInfo.left,e,t),i;i=r.filter(function(e,t){if(n.occupiedPlots.indexOf(e)===-1)return e}),this.layout.checkPosition(i)?(this.cellInfo.height=e,this.cellInfo.width=t,this.modify(r)):console.log("renderFlag returned false. something is in the way")},modify:function(t){var n=this;this.occupiedPlots.forEach(function(e){n.layout.Plots[e].occupied=!1}),t.forEach(function(e){n.layout.Plots[e].occupied=!0}),this.occupiedPlots=t,this.cssProps=e.extend({},this.layout.cellDimensions(this.cellInfo.height,this.cellInfo.width),{top:this.positionPlot.cssProps.top,left:this.positionPlot.cssProps.left}),this.$obj.css(this.cssProps)}},{Cell:n,CellInfo:t}}),define("layout",["jquery","plot","cell"],function(e,t,n){var r=function(){this.config={fluid:!0,container:e(""),columns:0,rows:0},this.Plots={},this.Cells={},this.containerDimensions={height:0,width:0}};return r.prototype={initConfig:function(t){return this.config={fluid:t.fluid,container:e(t.container),columns:t.columns,rows:t.rows},this.containerDimensions={height:this.config.container.height(),width:this.config.container.width()},this},refresh:function(){for(var e=0;e<this.config.rows;e++)for(var n=0;n<this.config.columns;n++){var r=new t({row:e,column:n},this);this.Plots[e+"-"+n]=r}},cellDimensions:function(e,t){var n=this.containerDimensions,r=this.config;return this.config.fluid===!0?{width:100/r.columns*t+"%",height:100/r.rows*e+"%"}:{width:n.width/r.column*columns,height:n.height/r.row*rows}},getOccupied:function(){var t=this,n=e.grep(Object.keys(this.Plots),function(e,n){if(t.Plots[e].occupied===!0)return e});return n},getUnoccupied:function(){var t=this,n=e.grep(Object.keys(this.Plots),function(e,n){if(t.Plots[e].occupied===!1)return e});return n},checkPosition:function(e){var t=this,n=!0,r=this.getOccupied();return e.forEach(function(e,i){t.Plots.hasOwnProperty(e)?r.indexOf(e)!==-1&&(console.log("plot currently occupied"),n=!1):(console.log("plot out of bounds"),n=!1)}),n},getPlots:function(e,t,n,r){var i=[],s;for(var o=0;o<n;o+=1)for(var u=0;u<r;u+=1)s=e+o+"-"+(t+u),i.push(s);return i},addCell:function(e,t,r,i,s,o){var u=this,a=new n.Cell,f=this.getPlots(e,t,r,i);a.initConfig(new n.CellInfo(e,t,r,i,s,o),this);if(!this.checkPosition(f)){console.log("cannot render a new cell on an occupied plot!");return}f.forEach(function(e,t){u.Plots[e].occupied=!0}),this.Cells[a.cellInfo.idName]=a,a.occupiedPlots=f,a.render()}},r});